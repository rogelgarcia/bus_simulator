# DONE

# Problem

The project currently has two Big City spec definition files:

- `src/app/city/specs/BigCitySpec.js` (JS module)
- `src/app/city/specs/city_spec_bigcity.json` (JSON artifact)

This duplication is confusing and has already caused edits to drift or require double-updates. There should be a single source of truth for the Big City spec. If the “base city” / demo spec has a similar duplication pattern, unify that as well so the project has a consistent spec authoring and export workflow.

# Request

Unify city spec definitions so there is only one authoritative source per spec (Big City, and Demo/Base City if applicable), and remove or strictly demote any secondary copies to generated artifacts.

Tasks:
- Choose a single source of truth for Big City spec (JS module or JSON) and update the code so only that source is edited/consumed as the authoritative definition.
- If keeping an export artifact (e.g. JSON) is valuable, ensure it is clearly treated as a generated artifact:
  - It must not be required to edit by hand.
  - It should be auto-generated or easily regenerated by a deterministic script.
  - The runtime should not depend on two different representations that can drift.
- Apply the same unification pattern to the Demo/Base City spec if a similar dual-definition exists.
- Ensure `CitySpecRegistry` and any spec-loading/editor paths still work with no functional regressions.
- Add a small guard (test or dev-time check) that detects drift/duplication so this doesn’t regress (e.g., Big City spec shouldn’t require manual edits in two places).

Nice to have:
- Add a small tool under `tools/` to export specs to JSON artifacts (or regenerate them) and document it in `PROJECT_TOOLS.md`, if artifacts are still desired.

## On completion
- When complete mark the AI document as DONE by adding a marker in the first line
- Also rename the AI file to `AI_DONE_179_PROJECTMAINTENANCE_unify_city_spec_sources_DONE`
- Provide a summary of the changes made in the AI document (very high level, one liner for each change)

## Summary
- Made `src/app/city/specs/BigCitySpec.js` the single source of truth for the Big City spec and treated `city_spec_bigcity.json` as a generated export artifact.
- Added `tools/city_spec_exporter/` to regenerate/check the JSON artifact deterministically and registered it in `PROJECT_TOOLS.md`.
- Added a Node guard test to detect drift between `BigCitySpec.js` and `city_spec_bigcity.json`.
